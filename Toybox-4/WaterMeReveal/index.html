<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Water Me Me – The Pledge</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  
  <button id="btn-test-claim" class="dev-claim-btn">💧 Claim Token (Dev Test)</button>

  <div class="ad-column left-column">
    <div class="ad" title="Earn +5 XP"><a href="https://www.youtube.com/shorts/sTuStNx31os" target="_blank">
      <img src="../assets/blow/TOTD-teaser.png" alt="Tent of the Dead Teaser" />
    </a></div>
    <div class="ad" title="Earn +5 XP"><a href="install-plugin/index.html">💾 Install the GaiaVerse Netscape Plugin</a></div>
    <div class="ad" title="Earn +5 XP"><a href="shadow-sight/index.html">👀 Shadow Sight™: See beyond the veil</a></div>
    <div class="ad" title="Earn +5 XP"><a href="weed-water/index.html">🧃 Drink Weed Water, Stay Rooted™</a></div>
    <div class="ad" title="Earn +5 XP"><a href="dental-dao/index.html">🦷 DENTAL DAO – Decay or Destiny?</a></div>
    <div class="ad" title="Earn +5 XP"><a href="sniff-me-me/index.html">👀 SNIFF ME ME SNEAK PEEK</a></div>
    <div class="ad" title="Earn +5 XP"><a href="nft-crates/index.html">📦 Buy 2 NFTs Get 6 Crates</a></div>
    <div class="ad" title="Earn +5 XP"><a href="barons-cleanse/index.html">🧼 Baron's Cleanse™ – Coming Soon</a></div>
    <div class="ad" title="Earn +5 XP"><a href="trade-baron/index.html">💼 TRADE LIKE A BARON. LOSE LIKE A LEGEND.</a></div>
  </div>

  <div id="container">
    <div id="pledge-wrapper">
      <img src="../assets/blow/Water-Me-Me.png" alt="Water Me Me" id="glowing-token" />
      <h1>🌊 THE PLEDGE</h1>
      <h2>(Water Me Me – The Beginning)</h2>

      <div id="pledge-box">
        <p>I enter the GaiaVerse willingly.<br>
        I know this is a game.<br>
        A place to play. To explore. To dissolve.</p>

        <p>But I also know:<br>
        Even games have rules.<br>
        And rules reveal truths.<br>
        And truth reveals me.</p>

        <p>Here, my choices matter.<br>
        Here, I may laugh, I may earn, I may grow.<br>
        But somewhere between the missions and the memes—<br>
        I will begin to soften.</p>

        <p>I will begin to crack.<br>
        I will begin to remember.</p>

        <p>And once I remember, I cannot forget.</p>

        <p>I do not ask for answers.<br>
        I ask to be watered.</p>

        <p><strong>Let the game begin.</strong></p>
      </div>

      <div id="register-box">
        <h3>Want to register your pledge?</h3>
        <input type="email" placeholder="Enter your email" />
        <button>Send Verification Code</button>
        <p class="note">We’ll send a code to verify you.<br>
        This links your XP and credibility going forward.</p>
      </div>

      <div id="back-link">
  <a href="../../Toybox-5/index.html">← Continue to Toybox 5</a>
</div>

      </div>
    </div>
  </div>

  <div class="ad-column right-column">
    <div class="ad" title="Earn +5 XP"><a href="surveillance-club/index.html">📡 Join the Barons' Surveillance Loyalty Club™</a></div>
    <div class="ad" title="Earn +5 XP"><a href="red-pill/index.html">💊 Eat the Red Pill & Get a Free Hat</a></div>
    <div class="ad" title="Earn +5 XP"><a href="brain-mint/index.html">🧠 Brain-Mint 3000 – Freshness You Can Think</a></div>
    <div class="ad" title="Earn +5 XP"><a href="whisper-coin/index.html">👻 WhisperCoin – Mint in Silence</a></div>
    <div class="ad" title="Earn +5 XP"><a href="glitch-glade/index.html">🚨 XP BOOST: GLITCHGLADE MAP DROP</a></div>
    <div class="ad" title="Earn +5 XP"><a href="tokenomics-tunnel/index.html">💊 TOKENOMICS TUNNEL – ENTER?</a></div>
    <div class="ad" title="Earn +5 XP"><a href="totd-trailer/index.html">🎥 NEW: Tent of the Dead trailer</a></div>
    <div class="ad" title="Earn +5 XP"><a href="dank-pass/index.html">💎 CLAIM YOUR DANK PASS</a></div>
    <div class="ad" title="Earn +5 XP"><a href="ghost-noodle/index.html">🧙‍♂️ Unlock: Ghost Noodle Lore</a></div>
  </div>
  <script>
  // Ensure playerState is available
  if (!window.playerState) {
    window.playerState = {
      meMes: JSON.parse(localStorage.getItem('meMes')) || {},
      meMeTokens: {
        water: parseFloat(localStorage.getItem('waterTokens')) || 0,
      },
      
      markMeMeEarned(token) {
        this.meMes[token] = true;
        this.meMeTokens[token] = 1.0; // Set to 100%
        localStorage.setItem('meMes', JSON.stringify(this.meMes));
        localStorage.setItem(`${token}Tokens`, this.meMeTokens[token]);
      },
      
      takeMeMePledge(token) {
        if (this.hasMeMe(token)) {
          this.meMeTokens[token] = 2.2; // 220% - with bonus!
          localStorage.setItem(`${token}Tokens`, this.meMeTokens[token]);
          return true;
        }
        return false;
      },
      
      hasMeMe(token) {
        return this.meMes[token] === true;
      },
      
      save() {
        localStorage.setItem('meMes', JSON.stringify(this.meMes));
        for (const token in this.meMeTokens) {
          localStorage.setItem(`${token}Tokens`, this.meMeTokens[token]);
        }
      }
    };
  }

  document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById('btn-test-claim');
    
    // Check if token is already earned
    if (playerState.hasMeMe("water")) {
      const waterTokenValue = parseFloat(localStorage.getItem('waterTokens')) || 0;
      
      if (waterTokenValue >= 2.0) {
        // Pledge already taken
        btn.classList.add("claimed");
        btn.textContent = "✅ Pledge Taken";
      } else {
        // Token earned but no pledge yet
        btn.classList.add("earned");
        btn.textContent = "🌊 Take Water Pledge";
      }
    }

    btn.addEventListener('click', () => {
      if (!playerState.hasMeMe("water")) {
        // First-time claim - earn the token
        playerState.markMeMeEarned("water");
        playerState.save();
        btn.classList.add("earned");
        btn.textContent = "🌊 Take Water Pledge";
      } else {
        // Already have token, now take pledge
        const waterTokenValue = parseFloat(localStorage.getItem('waterTokens')) || 0;
        
        if (waterTokenValue < 2.0) {
          if (confirm("Do you pledge to protect and nurture water in your community?")) {
            playerState.takeMeMePledge("water");
            playerState.save();
            btn.classList.remove("earned");
            btn.classList.add("claimed");
            btn.textContent = "✅ Pledge Taken";
            alert("You've taken the Water Pledge! Your token is now boosted to 220%!");
          }
        }
      }
    });
  });
</script>
  
</body>
</html>